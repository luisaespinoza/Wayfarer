{% extends 'base.html' %}

{% block content %}

<h2>Cities</h2>

    <div class='row'>
    <div class='col s4' style='padding:10px;'>
      <h4>Cities</h4>
      <div class="cities-sidebar">
        {% for city in cities %}
        <a href='{% url 'cities_details' city.id %}'>
        <div class='card'>
        <div class='card-title'>{{city.get_city_name_display}}</div>
        <div class='card-image'><img class='cities-sidebar-thumb' src='{{city.get_city_photo_url_display}}' alt=''></div>
        <div class='card-content'>{{city.posts.count}} posts.</div>
        </div>
        </a>
        {% endfor %}
      </div>
    </div>
    <div class='col s8'>
      <div class='container'>

        <div class='row'>
          <div class='col s4'>
            <h4>{{city.get_city_name_display}}</h4>
            <h6></h6>
          </div>
          <div class='col s8 right right-align'>
            <img src='{{city.get_city_photo_url_display}}' style='max-width:100%; height:auto;' alt=''>
          </div>
        </div>


        <div class='row'>
          <h5>Posts</h5>
          {% if user.is_authenticated %}
          {% include 'new_post.html' %}
          {% endif %}
        </div>


          {% for post in city.posts.all reversed %}
          <div class='row' style='margin-top:0; margin-bottom:0;'>
          <div class='col s2'>
            <h6> author: {{post.author}}</h6>
          </div>
          <div class='col s10'>
          <a href="{% url 'post_details' post.id %}">
            <div class='card cities-post-preview'>
              <div class='card-title'>
                <h5 style='margin-top:5px;'>{{post.title}} | {{post.created_at}}</h5>
              </div>
              <div class='card-content'>
                <p style='text-overflow: ellipsis;'>{{post.content}}</p>
              </div>
            </div>
          </a>
          </div>
        </div>
          {% endfor %}


      </div>
    </div>
  </div>



{% endblock  %}